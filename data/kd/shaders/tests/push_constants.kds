//
// > Notice: Floating Trees Inc. @ 2025
// > Create Time: 2025-07-26 00:17:42
//

#include "kd/shaders/common/bindless.kds"

#pragma vertex VSMain
#pragma pixel FSMain

static const float3 POSITIONS[] = {
    float3(-0.5f, -0.5f, 0.0f),
    float3( 0.5f, -0.5f, 0.0f),
    float3( 0.0f,  0.5f, 0.0f)
};

struct VertexOutput
{
    float4 Position : SV_Position;
    float3 Color : COLOR;
};

struct PushConstants
{
    float4 Colors[3];
};
PUSH_CONSTANTS(PushConstants, Push);

VertexOutput VSMain(uint VertexID : SV_VertexID)
{
    VertexOutput output = (VertexOutput)0;

    output.Position = float4(POSITIONS[VertexID], 1.0f);
    output.Color = Push.Colors[VertexID].rgb;

    return output;  
}

float4 FSMain(VertexOutput input) : SV_Target
{
    return float4(input.Color, 1.0f);
}